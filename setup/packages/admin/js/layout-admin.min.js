jQuery(function($){function updateLayoutColumn(datadevice){$("#plazart_layout_builder .generator .column").each(function(i,el){for(var $widthinput=$(this).find(".widthinput-"+datadevice).val(),$offsetinput=$(this).find(".offsetinput-"+datadevice).val(),$nextdevice=datadevice;""==$widthinput;)$widthinput="xs"==$nextdevice?"12":($nextdevice=$getnextdevice[$nextdevice],$(this).find(".widthinput-"+$nextdevice).val());$offsetinput=""!=$offsetinput?" offset"+$offsetinput:"",$(this).removeClass().addClass("ui-sortable column span"+$widthinput+$offsetinput)})}var $tzLayoutAdmin=$.tzLayoutAdmin=function(options,el){$(el);function reArrangePopOvers(){$("#layout-options .row-fluid").each(function(){$(this).find(">.column").find(".columntools > .rowcolumnspop").attr("data-placement","bottom").data("placement","bottom"),$(this).find(">.column").first().find(".columntools > .rowcolumnspop").attr("data-placement","right").data("placement","right"),$(this).find(">.column").last().find(".columntools > .rowcolumnspop").attr("data-placement","left").data("placement","left")})}function columnInputs(element,name){$(element).find(">.widthinput-xs").attr("name",name+"[col-xs]"),$(element).find(">.widthinput-sm").attr("name",name+"[col-sm]"),$(element).find(">.widthinput-md").attr("name",name+"[col-md]"),$(element).find(">.widthinput-lg").attr("name",name+"[col-lg]"),$(element).find(">.offsetinput-xs").attr("name",name+"[col-xs-offset]"),$(element).find(">.offsetinput-sm").attr("name",name+"[col-sm-offset]"),$(element).find(">.offsetinput-md").attr("name",name+"[col-md-offset]"),$(element).find(">.offsetinput-lg").attr("name",name+"[col-lg-offset]"),$(element).find(">.typeinput").attr("name",name+"[type]"),$(element).find(">.positioninput").attr("name",name+"[position]"),$(element).find(">.styleinput").attr("name",name+"[style]"),$(element).find(">.customclassinput").attr("name",name+"[customclass]"),$(element).find(">.responsiveclassinput").attr("name",name+"[responsiveclass]"),$(element).find(">.animationType").attr("name",name+"[animationType]"),$(element).find(">.animationSpeed").attr("name",name+"[animationSpeed]"),$(element).find(">.animationDelay").attr("name",name+"[animationDelay]"),$(element).find(">.animationOffset").attr("name",name+"[animationOffset]"),$(element).find(">.animationEasing").attr("name",name+"[animationEasing]")}function rowInputs(element,name){$(element).find(">div>.rowpropperties .rownameinput").attr("name",name+"[name]"),$(element).find(">div>.rowpropperties .rowcustomclassinput").attr("name",name+"[class]"),$(element).find(">div>.rowpropperties .rowresponsiveinput").attr("name",name+"[responsive]"),$(element).find(">div>.rowpropperties .rowbackgroundcolorinput").attr("name",name+"[backgroundcolor]"),$(element).find(">div>.rowpropperties .rowtextcolorinput").attr("name",name+"[textcolor]"),$(element).find(">div>.rowpropperties .rowlinkcolorinput").attr("name",name+"[linkcolor]"),$(element).find(">div>.rowpropperties .rowlinkhovercolorinput").attr("name",name+"[linkhovercolor]"),$(element).find(">div>.rowpropperties .rowmargininput").attr("name",name+"[margin]"),$(element).find(">div>.rowpropperties .rowpaddinginput").attr("name",name+"[padding]"),$(element).find(">div>.row-container .containertype").attr("name",name+"[containertype]")}function columnRowInputs(element,name){$(element).find(">.tpp-sortable").each(function(rowl4){var r4name=name+"[children]["+rowl4+"]";rowInputs(this,r4name),$(this).find("> div >.tpp-sortable >.column").each(function(columnl4){columnl4=r4name+"[children]["+columnl4+"]";columnInputs(this,columnl4),$(this).find(">.tpp-sortable").length&&columnRowInputs(this,columnl4)}),columnRowInputs($(this).next(),r4name)})}function popover(){$('a[rel="popover"]').popover({html:!0,sanitize:!1,content:function(event){var __el_pop=$(this),id=(__el_pop=this===window&&void 0!==event?$(event):__el_pop).attr("href"),event=__el_pop.closest(".column").find("> input.widthinput-lg").val(),event=(setTimeout(function(value,$this){$this.parent().find(".popover #spanwidth select").val(value)},300,event,__el_pop),$("#content,#element-box").delegate(".popover select.possiblewidths","change",function(event){event.stopImmediatePropagation();var newSpan=$(this).val();switch($("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":$(this).closest(".column").find(">.widthinput-xs").val(newSpan);break;case"sm":$(this).closest(".column").find(">.widthinput-sm").val(newSpan);break;case"md":default:$(this).closest(".column").find(">.widthinput-md").val(newSpan);break;case"lg":$(this).closest(".column").find(">.widthinput-lg").val(newSpan)}$(this).closest(".column").removeClass().addClass("column span"+newSpan+" col-md-"+newSpan)}),__el_pop.closest(".column").find("> input.offsetinput-lg").val()),event=(setTimeout(function(value,$this){$this.parent().find(".popover #spanoffset select").val(value)},300,event,__el_pop),$("#content,#element-box").delegate(".popover select.possibleoffsets","change",function(event){event.stopImmediatePropagation();var newOffset=$(this).val(),event=$(this).closest(".column").attr("class").replace(/\boffset\S+/g,"");switch($(this).closest(".column").attr("class",event).addClass("offset"+newOffset),$("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":$(this).closest(".column").find(">.offsetinput-xs").val(newOffset);break;case"sm":$(this).closest(".column").find(">.offsetinput-sm").val(newOffset);break;case"md":default:$(this).closest(".column").find(">.offsetinput-md").val(newOffset);break;case"lg":$(this).closest(".column").find(">.offsetinput-lg").val(newOffset)}if("0"==newOffset)switch(__el_pop.parents(".popover").parent().parent().removeClass("offset0"),$("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":$(this).closest(".column").find(">.offsetinput-xs").val("");break;case"sm":$(this).closest(".column").find(">.offsetinput-sm").val("");break;case"md":default:$(this).closest(".column").find(">.offsetinput-md").val("");break;case"lg":$(this).closest(".column").find(">.offsetinput-lg").val("")}}),__el_pop.closest(".column").find("> input.typeinput").val()),event=(setTimeout(function(value,$this){value&&$this.parent().find(".popover #includetypes select").val(value)},300,event,__el_pop),$("#content,#element-box").delegate(".popover select.includetypes","change",function(event){event.stopImmediatePropagation();event=$(this).val();$(this).closest(".column").find(">.typeinput").val(event),$(this).closest(".column").removeClass("type-component type-message"),$(this).closest(".column").addClass("type-"+event),$(this).closest(".tab-pane").find("#positions").hide(),$(this).closest(".column").find(">.position-name").text(event.toLowerCase())}),__el_pop.closest(".column").find(".positioninput").val()),event=(setTimeout(function(value,$this){$this.parent().find(".popover #positions select").val(value)},300,event,__el_pop),$("#content,#element-box").delegate(".popover select.positions","change",function(event){event.stopImmediatePropagation();event=$(this).val();""==event&&(event="(none)"),$(this).closest(".column").find(">.positioninput").val(event),$(this).closest(".column").find(">.position-name").text(event)}),$(this).closest(".column").find(".customclassinput").val()),event=(setTimeout(function(value,$this){$this.parent().find(".popover #inputcustomclass").val(value)},300,event,__el_pop),$("#content,#element-box").delegate(".popover input.customclass","blur",function(event){event.stopImmediatePropagation();event=$(this).val();$(this).closest(".column").find(">.customclassinput").val(event)}),$("#content,#element-box").delegate(".popover #columnsettings a","click",function(event){var id=$(this).attr("href");""!=id&&"#"!=id&&($(this).parents("ul").find("li").removeClass("active"),$(this).parent().addClass("active"),$(this).parents("ul").next().find(".active").removeClass("active"),$(".popover "+id).addClass("active"),$(this).parents(".dropdown-menu").parents("li.dropdown").addClass("active"))}),__el_pop.closest(".column").find(".responsiveclassinput").val().split(/\s+/));return $(id).find("#responsive input:checkbox").removeAttr("checked"),$.each(event,function(index,item){$(id).find('#responsive input[value="'+item+'"]').attr("checked",!0)}),$("#content,#element-box").delegate(".popover input:checkbox","click",function(event){event.stopImmediatePropagation();var value,event=$(this).val(),currentResponsive=$(this).closest(".column").find(">.responsiveclassinput").val();void 0===currentResponsive&&(currentResponsive=""),value=$(this).is(":checked")?(value=$.unique((value=currentResponsive+" "+event).split(/\s+/))).join(" "):currentResponsive.replace(event,""),$(this).closest(".column").find(">.responsiveclassinput").val($.trim(value))}),__el_pop.closest(".columntools").addClass("open"),$(id).html()},template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><div class="popover-body"><p></p></div></div> <p>   <a class="btn btn-primary sp-popover-apply" onclick="jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').popover(\'hide\');  jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').show();"><i class="icon-ok"></i> Apply</a> <a class="btn btn-danger sp-popover-close" onclick="jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').popover(\'hide\'); jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').show();"><i class="icon-remove"></i> Close</a>   </p> </div></div>'}).click(function(){return $(this).show(),!1}),$("#layout-options").delegate(".popover .sp-popover-apply, .popover .sp-popover-close","click",function(event){$(this).closest(".columntools").removeClass("open"),$("#columnsettings").find("li").first().addClass("active")}),$('a[rel="rowpopover"]').popover({html:!0,sanitize:!1,placement:"left",content:function(event){var __el_pop=$(this),id=(__el_pop=this===window&&void 0!==event?$(event):__el_pop).attr("href"),event=__el_pop.parent().prev().find(">span.rowdocs>.rownameinput"),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowname").val(value)},300,__el_pop,event.val()),$("#content,#element-box").delegate(".popover input.rowname","blur",function(event){event.stopImmediatePropagation();event=$(this).val();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rownameinput").val(event),$(this).parents(".popover").parent().prev().find(">.rowname").text(event)}),__el_pop.parent().prev().find(">span.rowdocs>.rowbackgroundcolorinput")),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowbackgroundcolor").val(value),$this.parent().find(">.popover .rowbackgroundcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(color){color=color.toRgbString();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowbackgroundcolorinput").val(color)}})},300,__el_pop,event.val()),__el_pop.parent().prev().find(">span.rowdocs>.rowtextcolorinput")),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowtextcolor").val(value),$this.parent().find(">.popover .rowtextcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(color){color=color.toRgbString();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowtextcolorinput").val(color)}})},300,__el_pop,event.val()),__el_pop.parent().prev().find(">span.rowdocs>.rowlinkcolorinput")),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowlinkcolor").val(value),$this.parent().find(">.popover .rowlinkcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(color){color=color.toRgbString();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowlinkcolorinput").val(color)}})},300,__el_pop,event.val()),__el_pop.parent().prev().find(">span.rowdocs>.rowlinkhovercolorinput")),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowlinkhovercolor").val(value),$this.parent().find(">.popover .rowlinkhovercolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(color){color=color.toRgbString();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowlinkhovercolorinput").val(color)}})},300,__el_pop,event.val()),__el_pop.parent().prev().find(">span.rowdocs>.rowmargininput")),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowmargin").val(value)},300,__el_pop,event.val()),$("#content,#element-box").delegate(".popover input.rowmargin","blur",function(event){event.stopImmediatePropagation();event=$(this).val();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowmargininput").val(event)}),__el_pop.parent().prev().find(">span.rowdocs>.rowpaddinginput")),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowpadding").val(value)},300,__el_pop,event.val()),$("#content,#element-box").delegate(".popover input.rowpadding","blur",function(event){event.stopImmediatePropagation();event=$(this).val();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowpaddinginput").val(event)}),__el_pop.parent().prev().find(">span.rowdocs>.rowcustomclassinput")),event=(setTimeout(function($this,value){$this.parent().find(">.popover .rowcustomclass").val(value)},300,__el_pop,event.val()),$("#content,#element-box").delegate(".popover input.rowcustomclass","blur",function(event){event.stopImmediatePropagation();event=$(this).val();$(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowcustomclassinput").val(event)}),__el_pop.parent().prev().find(">span.rowdocs>.rowresponsiveinput").val().split(/\s+/));return $(id).find("#rowresponsiveinputs input:checkbox").removeAttr("checked"),$.each(event,function(index,item){$(id).find('#rowresponsiveinputs input[value="'+item+'"]').attr("checked",!0)}),$("#content,#element-box").delegate(".popover input:checkbox","click",function(event){event.stopImmediatePropagation();var value,event=$(this).val(),currentResponsive=$(this).parents(".popover").parent().prev().find("span.rowdocs>.rowresponsiveinput").val();void 0===currentResponsive&&(currentResponsive=""),value=$(this).is(":checked")?(value=$.unique((value=currentResponsive+" "+event).split(/\s+/))).join(" "):currentResponsive.replace(event,""),$(this).parents(".popover").parent().prev().find("span.rowdocs>input.rowresponsiveinput").val($.trim(value))}),$(id).html()},template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><div class="popover-body"><p></p></div></div><a class="btn btn-primary d-inline-block" onclick="jQuery(this).closest(\'.popover\').prevAll(\'a[rel=rowpopover]\').popover(\'hide\'); jQuery(this).closest(\'.popover\').prevAll(\'a[rel=rowpopover]\').show(); "><i class="icon-ok"></i> Apply</a></div></div>'}).click(function(){return $(this).show(),!1})}function rowColumnSortable(){$("div.tpp-sortable").sortable({forcePlaceholderSize:!0,axis:"x,y",items:">div.column",tolerance:"pointer",handle:".columnmove",containment:"parent",placeholder:"tz-state-highlight column",start:function(event,ui){ui.placeholder.width(ui.item.width())},update:function(event,ui){setTimeout(function(){$var.j4Compare?$('a[rel="popover"]').popover("dispose"):$('a[rel="popover"]').popover("destroy"),$('a[rel="popover"]').show(),reArrangePopOvers(),popover()},300)}}),$(".generator").sortable({axis:"y",forcePlaceholderSize:!0,containment:"parent",handle:".rowmove",placeholder:"tz-state-highlight-row",items:">div.tpp-sortable"}),$(".generator").sortable("refreshPositions"),$(".generator > .tpp-sortable .tpp-sortable .column").sortable({axis:"y",forcePlaceholderSize:!0,handle:".row-move-in-column",placeholder:"tz-state-highlight",items:".child-row"})}var $var=$.extend(!0,$tzLayoutAdmin.defaults,options);reArrangePopOvers(),$.tzLayoutAdmin.tzTemplateSubmit=function(){$("#content .generator >.layoutmainrow , #element-box .generator >.tpp-sortable").each(function(rowl0){var r0name=$var.fieldName+"["+rowl0+"]";rowInputs(this,r0name),$(this).find("> div >.tpp-sortable >.column").each(function(columnl0){columnl0=r0name+"[children]["+columnl0+"]";columnInputs(this,columnl0),$(this).find(">.child-row").length?columnRowInputs(this,columnl0):columnRowInputs($(this).next(),columnl0)})}),$(".toolbox-saveConfig").trigger("click")},jQuery.fn.textOnly,jQuery.fn.textOnly=function(selector){return $.trim($(selector).clone().children().remove().end().text())},function($){$.fn.alterClass=function(removals,additions){var patt;return-1===removals.indexOf("*")?this.removeClass(removals):(patt=new RegExp("\\s"+removals.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g"),this.each(function(i,it){for(var cn=" "+it.className+" ";patt.test(cn);)cn=cn.replace(patt," ");it.className=$.trim(cn)})),additions?this.addClass(additions):this}}(jQuery),jQuery.fn.getClass,jQuery.fn.getClass=function(classname){if(classname&&"object"==typeof classname){var classes=$(this).attr("class").split(/\s+/),classes=new RegExp(classname).exec(classes);if(null!=classes)return classes[classes.length-1]}return"boolean"==typeof classname?$(this).attr("class").split(/\s+/):""},$("#content").delegate(".columntools > a:not(.accordion-toggle), .row-tools > a:not(.accordion-toggle)","click",function(){return!1}),popover(),$("#content,#element-box").delegate("a.rowdelete","click",function(){return confirm("Are you sure to delete this row?")&&$(this).parent().parent().parent().slideUp("slow",function(){$(this).remove()}),!1}),$("#content,#element-box").delegate("a.columndelete","click",function(){return confirm("Are you sure to delete this column?")&&($parent2=$(this).parent().parent().parent(),$(this).parent().parent().fadeOut("fast").remove(),$parent2.find(">.column").length),!1}),rowColumnSortable(),$("#content,#element-box").delegate("a.add-row","click",function(){var $item=$(this);return $.get("index.php?option=com_tz_portfolio_plus&view=template_style&layout=new-row&format=tpl&time="+$.now(),function($row){$($row).hide().insertAfter($item.closest(".tpp-sortable")).slideDown("slow"),$var.j4Compare?$('a[rel="popover"]').popover("dispose"):$('a[rel="popover"]').popover("destroy"),$('a[rel="popover"]').show(),reArrangePopOvers(),popover()}),!1}),$("#content,#element-box").delegate("a.columnmove, a.icon-asterisk","click",function(){return!1}),$("#content,#element-box").delegate("a.add-column","click",function(){var $selector;$(this).parent().next().next().find(">.column").length;return $selector=$(this).parent().next().next(),$.get("index.php?option=com_tz_portfolio_plus&view=template_style&layout=new-column&format=tpl",function($column){$($column).hide().appendTo($selector).fadeIn(1e3),rowColumnSortable(),$var.j4Compare?$('a[rel="popover"]').popover("dispose"):$('a[rel="popover"]').popover("destroy"),$('a[rel="popover"]').show(),reArrangePopOvers(),popover()}),$var.j4Compare?$('a[rel="popover"]').popover("dispose"):$('a[rel="popover"]').popover("destroy"),$('a[rel="popover"]').show(),reArrangePopOvers(),popover(),!1});$("#content,#element-box").delegate("a.add-rowin-column","click",function(){var $this=$(this);return $.get("index.php?option=com_tz_portfolio_plus&view=template_style&layout=new-row&format=tpl&rowincolumn=true",function($row){$($row).hide().appendTo($this.closest(".column")).slideDown("slow"),$var.j4Compare?$('a[rel="popover"]').popover("dispose"):$('a[rel="popover"]').popover("destroy"),$('a[rel="popover"]').show(),reArrangePopOvers(),popover()}),!1})},$getnextdevice=($.extend($.tzLayoutAdmin,{defaults:{basePath:"",pluginPath:"",token:"",j4Compare:!1,fieldName:"jform[attrib]"},tzTemplateSubmit:function(){}}),$.fn.tzLayoutAdmin=function(options){if("object"==typeof(options=void 0===options?{}:options))return new $.tzLayoutAdmin(options,this)},new Array);$getnextdevice.lg="md",$getnextdevice.md="sm",$getnextdevice.sm="xs";$(document).ready(function(){$("button[class*='tz-admin-dv']").click(function(){switch($("button[class*='tz-admin-dv']").removeClass("active"),$(this).addClass("active"),$(this).attr("data-device")){case"xs":$("#plazart_layout_builder .generator").css("width",450),updateLayoutColumn("xs");break;case"sm":$("#plazart_layout_builder .generator").css("width",650),updateLayoutColumn("sm");break;case"md":$("#plazart_layout_builder .generator").css("width",800),updateLayoutColumn("md");break;default:$("#plazart_layout_builder .generator").css("width",950),updateLayoutColumn("lg")}}),$("button[class*='tz-admin-dv']").hover(function(){"undefined"!=typeof tooltip&&$(this).tooltip("show")})})});