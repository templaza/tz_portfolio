!function(t,e,o){"use strict";function a(t,e,o){return o&&"auto"!=o||!t.last().attr("data-order")||!t.last().data("order").toString().length||(o="filter_asc"),t.sort(function(t,e){var a=jQuery(t).data("order")?parseInt(jQuery(t).data("order"),10):jQuery(t).text().trim(),i=jQuery(e).data("order")?parseInt(jQuery(e).data("order"),10):jQuery(e).text().trim();if("*"!=jQuery(t).attr("data-option-value")&&"*"!=jQuery(e).attr("data-option-value")){if(void 0!==o&&"asc"==o.substr(o.length-3,o.length).toLowerCase())return a<i?-1:a>i?1:0;if(void 0!==o&&"desc"==o.substr(o.length-4,o.length).toLowerCase())return a>i?-1:a<i?1:0}}),t.each(function(t,o){e.append(o).append("\n")}),!0}o.infiniteScroll={addAjaxComplete:function(t){this.ajaxCompletes.push(t)},ajaxCompletes:[]};var i={lastClickAvailabled:!1,createCookie:function(t,e,o){if(o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var i="; expires="+a.toGMTString()}else i="";document.cookie=t+"="+e+i+"; path=/"},readCookie:function(t){for(var e=t+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){for(var i=o[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},eraseCookie:function(t){createCookie(t,"",-1)},goToByScroll:function(e){t("html,body").animate({scrollTop:t("#"+e).offset().top},"slow")}};t.tzPortfolioPlusIsotope=function(r,n){var l=t(r),s=t.extend(!0,{},t.tzPortfolioPlusIsotope.defaults),d=t.extend(!0,s,n);d.params.orderby_sec.length||(d.params.orderby_sec="rdate");var c=d.params,f=d.isotope_options;switch(c.orderby_sec){default:f.core.sortBy="original-order",f.core.sortAscending=!0;break;case"order":case"rorder":f.core.sortBy="original-order",f.core.sortAscending=!0;break;case"date":f.core.sortBy="date",f.core.sortAscending=!0,d.timeline&&(f.core.sortAscending=!1);break;case"rdate":f.core.sortBy="date",f.core.sortAscending=!1;break;case"alpha":f.core.sortBy="name",f.core.sortAscending=!0;break;case"ralpha":f.core.sortBy="name",f.core.sortAscending=!1;break;case"author":case"rauthor":f.core.sortBy="date",f.core.sortAscending=!1;break;case"hits":f.core.sortBy="hits",f.core.sortAscending=!1;break;case"rhits":f.core.sortBy="hits",f.core.sortAscending=!0}f.core.layoutMode.length||(c.layout_type.length?f.core.layoutMode=c.layout_type[0]:f.core.layoutMode="masonry"),l.tz_init=function(o){var i,r,n=t(d.mainElementSelector).width(),s=c.tz_column_width,p=0,u=0,h=0;function g(t,o){void 0!==t&&t.filter(function(){var t=this.getBoundingClientRect();return t.top>=0&&t.top<=e.innerHeight}).trigger(o)}n<l.width()&&(n=l.width()),d.columnWidth&&(s=d.columnWidth),d.timeline&&t.extend(!0,t.Isotope.prototype,{_sort:function(){var e=this.options.sortBy,o=this._getSorter,a=this.options.sortAscending?1:-1;this.$filteredAtoms.sort(function(i,r){var n=o(i,e),l=o(r,e);if(n===l&&"original-order"!==e&&(n=o(i,"original-order"),l=o(r,"original-order")),"name"==e||"hits"==e){if(t(i).attr("data-category")>t(r).attr("data-category"))return 0;if(t(i).attr("data-category")==t(r).attr("data-category"))return t(i).hasClass("TzDate")?0:n>l?1*a:0}return(n>l?1:n<l?-1:0)*a})}}),i=Math.floor(n/s),d.beforeCalculateColumn(i),u=n,h=n,(p=(r=i+1)-n/s>n/s-i?i:r)>1&&(h=2*(u=Math.floor(n/p))),d.afterCalculateColumn(p,u),l.find(".element").width(u),l.find(d.elementFeatureSelector).width(h),l.find(".element").find(".element.TzDate").width(n),d.afterColumnWidth(p,u),o&&l.find(".element").css({opacity:0}),l.imagesLoaded(function(){if(o&&l.find(".element").css({opacity:1}),parseInt(c.enable_lazyload,10)&&(void 0!==t.fn.lazyload||void 0!==e.lazyload)){var i=l.find("img:not(.lazyloaded)").addClass("lazyload");i=l.find("img.lazyload"),t(e).on("scroll",function(){g(i,"lazylazy")}),i.css({"padding-top":function(){return this.height},"padding-left":function(){return this.width}}).attr("data-src",function(){return t(this).attr("src")}),i.lazyload({effect:"fadeIn",failure_limit:Math.max(i.length-1,0),placeholder:"",data_attribute:"src",appear:function(e,o){this.loaded||t(this).removeClass("lazyload").addClass("lazyloading")},load:function(e,o){this.loaded&&t(this).removeClass("lazyloading").addClass("lazyloaded").css({"padding-top":"","padding-left":""})}})}d.afterImagesLoaded(p,u);var r=t("html").attr("dir"),n=!0;(d.rtl||void 0!==r&&"rtl"===r.toLowerCase())&&(n=!1,t.Isotope.prototype._positionAbs=function(t,e){return{right:t,top:e}}),l.isotope({resizable:!1,itemSelector:f.core.itemSelector,layoutMode:f.core.layoutMode,sortBy:f.core.sortBy,sortAscending:f.core.sortAscending,filter:f.core.filter,transformsEnabled:n,masonry:{columnWidth:u},getSortData:f.core.getSortData,onLayout:function(){parseInt(c.enable_lazyload,10)&&g(i,"lazylazy")}},function(){parseInt(c.tz_show_filter,10)&&c.filter_tags_categories_order&&(parseInt(c.show_all_filter,10)||a(t(f.sortParentTag).find(f.sortChildTag),t(f.sortParentTag),c.filter_tags_categories_order)),f.complete(),l.afterLoadPortfolio()})})};var p=t(f.filterSelector+" [data-option-value]").hasClass("active")?"active":"selected";return l.loadPortfolio=function(){var a=t(f.filterSelector).find(f.tagFilter),i=null,n=f.core;a.click(function(a){a.preventDefault();var s=t(this);if((s.hasClass("selected")||s.hasClass("active"))&&!s.closest("[data-option-key=filter]").find('[data-sub-category-of="'+s.data("term")+'"]').length)return!1;var d=s.closest(".option-set"),u=n,h=d.attr("data-option-key"),g=s.attr("data-option-value");if("filter"!==h||"loading"!==t.data(r,"tppinfscr")){if(d.find("[data-option-value]").removeClass(p),s.addClass(p),"filter"===h){var m=s.data("term")||"*"!==g&&g.substr(g.lastIndexOf("_")+1,g.length),_=t(f.filterSelector).find('[data-sub-category-of="'+m+'"]');if(m&&_.length&&(s.closest(f.filterSelector).addClass("subcategory-active"),t(f.filterSelector).find("[data-sub-category-of]").removeClass("is-active"),_.addClass("is-active")),s.hasClass("js-subcategory-back-href")){var y=s.closest("[data-sub-category-of]").data("sub-category-of"),v=s.closest(f.filterSelector).find("[data-term="+y+"]").not(s);v.trigger("click"),v.closest("[data-sub-category-of]").length?v.closest("[data-sub-category-of]").addClass("is-active"):s.closest(f.filterSelector).removeClass("subcategory-active"),s.closest("[data-sub-category-of]").removeClass("is-active")}var z=!l.find(f.core.itemSelector+t(f.filterSelector+"[data-option-key=filter] "+f.tagFilter+"."+p).data("option-value")).length||t(e).height()>=t(document).height(),S=t(f.filterSelector+"[data-option-key=filter] "+f.tagFilter+"."+p);if(void 0===(S.length?t.data(S[0],"infinitescroll"):void 0)){if("ajaxInfiScroll"==c.tz_portfolio_plus_layout&&o.infiniteScroll.displayNoMorePageLoad&&l.find(f.core.itemSelector).length<o.infiniteScroll.countItems&&t("#tz_append > a:first").remove(),c.tz_portfolio_plus_layout&&"ajaxButton"!==c.tz_portfolio_plus_layout||(z=!l.find(f.core.itemSelector+t(f.filterSelector+"[data-option-key=filter] "+f.tagFilter+"."+p).data("option-value")).length,o.infiniteScroll.displayNoMorePageLoad&&t("#tz_append").show()),"ajaxButton"==c.tz_portfolio_plus_layout){t("#tz_append").show();var P=t.data(r,"tppinfscr_additemmore");void 0!==P&&P.length&&(P.clone(!0).insertAfter(t("#tz_append > a:first")),t("#tz_append > a:first").remove())}var C=t.data(r,"tzPortfolioPlusInfiniteScroll");C&&l.find(f.core.itemSelector).length<o.infiniteScroll.countItems&&C.infinitescroll("update",{state:{isDone:!1,isDuringAjax:!1,isBeyondMaxPage:!1}}),z&&l.find(f.core.itemSelector).length<o.infiniteScroll.countItems&&C&&("ajaxButton"==c.tz_portfolio_plus_layout&&(t("#infscr-loading").hide(),t("#tz_append").show().find("a:first").trigger("click")),"ajaxInfiScroll"==c.tz_portfolio_plus_layout&&(t("#infscr-loading").show(),t("#tz_append").show(),t("#tz_append > a:first").remove(),s.hasClass("js-subcategory-back-href")||C.infinitescroll("retrieve")))}else o.infiniteScroll.displayNoMorePageLoad?t("#tz_append").html('<a class="tzNomore">'+o.infiniteScroll.noMorePageLoadText+"</a>").show():t("#tz_append").hide()}return g="false"!==g&&g,u[h]=g,"layoutMode"===h&&"function"==typeof e.changeLayoutMode?e.changeLayoutMode(s,u):("name"==g&&("alpha"==c.orderby_sec||"alpha"!=c.orderby_sec&&"ralpha"!=c.orderby_sec?u.sortAscending=!0:"ralpha"==c.orderby_sec&&(u.sortAscending=!1)),"date"==g&&("rdate"==c.orderby_sec||"date"!=c.orderby_sec&&"rdate"!=c.orderby_sec?u.sortAscending=!1:"date"==c.orderby_sec&&(u.sortAscending=!0)),"hits"==g&&("hits"==c.orderby_sec||"hits"!=c.orderby_sec&&"rhits"!=c.orderby_sec?u.sortAscending=!1:"rhits"==c.orderby_sec&&(u.sortAscending=!0)),u=t.extend(i,u),l.isotope(u),i=u),!1}})},l.triggerOnClickItem=function(){t(f.core.itemSelector).find("a").click(function(e){i.createCookie("tppLatestItem",t(this).closest(f.core.itemSelector).attr("id"),.5)})},l.afterLoadPortfolio=function(){if("undefined"!==d.params.remember_recent_article&&1==d.params.remember_recent_article){var e=i.readCookie("tppLatestItem");null!=e&&!i.lastClickAvailabled&&t("#"+e).length&&(i.goToByScroll(e),i.lastClickAvailabled=!0)}},l.tz_init(!0),t(f.filterSelector+"[data-option-key=sortBy]").children().removeClass("selected active").end().find("[data-option-value="+f.core.sortBy+"]").addClass(p),l.loadPortfolio(),l.triggerOnClickItem(),l.vars=d,t.data(r,"tzPortfolioPlusIsotope",l),void 0!==t(e).smartresize?t(e).smartresize(function(){l.tz_init()}):t(e).on("debouncedresize",function(){l.tz_init()}),this},t.tzPortfolioPlusIsotope.defaults={columnWidth:"",mainElementSelector:"#TzContent",containerElementSelector:"#portfolio",elementFeatureSelector:".tz_feature_item",JSON:{},timeline:!1,rtl:!1,params:{orderby_sec:"rdate",tz_show_filter:1,filter_tags_categories_order:"auto",tz_portfolio_plus_layout:"ajaxButton",comment_function_type:"default",tz_filter_type:"categories",show_all_filter:0,tz_comment_type:"disqus",tz_show_count_comment:1,tz_column_width:233,layout_type:["masonry"],enable_lazyload:0},isotope_options:{core:{itemSelector:".element",layoutMode:"",sortBy:"date",sortAscending:!1,filter:"*",getSortData:{date:function(e){var o=void 0===e.hasClass?t(e):e,a=o.hasClass("element")&&o.attr("data-date").length?o.attr("data-date"):o.find(".create").text();return parseInt(a,10)},hits:function(e){var o=void 0===e.hasClass?t(e):e,a=o.hasClass("element")&&o.attr("data-hits").length?o.attr("data-hits"):o.find(".hits,.tpp-item-hit").text();return parseInt(a,10)},name:function(e){var o=void 0===e.hasClass?t(e):e,a=o.hasClass("element")&&o.find(".TzPortfolioTitle.name,.tpp-item-title.name").length?o.find(".TzPortfolioTitle.name, .tpp-item-title.name").text().trim():o.attr("data-title").length?o.attr("data-title"):"";return a.length?a:o.text().trim()}}},filterSelector:"#tz_options .option-set",tagFilter:"a",sortParentTag:"#filter",sortChildTag:"a",complete:function(){}},beforeCalculateColumn:function(){},afterCalculateColumn:function(){},afterColumnWidth:function(){},afterImagesLoaded:function(){}},t.fn.tzPortfolioPlusIsotope=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){void 0===t(this).data("tzPortfolioPlusIsotope")?new t.tzPortfolioPlusIsotope(this,e):t(this).data("tzPortfolioPlusIsotope")})},t.tzPortfolioPlusInfiniteScroll=function(r,n){var l,s=t(r),d=t.extend(!0,t.tzPortfolioPlusInfiniteScroll.defaults,n),c=d.params,f=!0,p=t("div.TzDate:last").attr("data-category");return l=function(){var o={},a=s.find(d.itemSelector).map(function(){var e=t(this).attr("data-portfolio-item-id");return void 0!==e&&!1!==e?t(this).data("portfolio-item-id"):t(this).attr("id").replace(/tzelement/i,"")}).get();o["shownIds[]"]=a;var i=s.data("tzPortfolioPlusIsotope");if(i){var n=i.vars,l=t(n.isotope_options.filterSelector+"[data-option-key=filter]").find(n.isotope_options.tagFilter+'.selected:not([data-option-value="*"]),'+n.isotope_options.tagFilter+'.active:not([data-option-value="*"])'),f=l.data("option-value");"tags"===c.tz_filter_type?void 0!==f&&(o.tagAlias=f.replace(/\./,"")):l.data("term")?o.id=l.data("term"):void 0!==f&&(o.id=f.substr(f.lastIndexOf("_")+1,f.length))}return e.location.search.replace(/\?/i,"").split("&").map(function(t,e,a){var i=t.split("=");if(i.length){i[0];i[0].match(/^fields/i)&&(o[i[0]]=i[1])}}),t("#tz_append > a.tzNomore").remove(),t.data(r,"tppinfscr","loading"),o},s.infinitescroll({navSelector:d.navSelector,nextSelector:d.nextSelector,itemSelector:d.itemSelector,dataType:d.dataType,ajaxMethod:d.ajaxMethod,ajaxData:l,path:function(e){return t(d.nextSelector).attr("href").replace(/\&page=[0-9+]/i,"")},template:function(e){if(e){if(e.filter){var o=(o=t(e.filter)).map(function(){if(-1==t(d.sortParentTag).find(d.sortChildTag+'[data-option-value="'+t(this).data("option-value")+'"]').index())return this});t(d.sortParentTag).append(o),s.data("tzPortfolioPlusIsotope").loadPortfolio(),a(t(d.sortParentTag).find(d.sortChildTag),t(d.sortParentTag),c.filter_tags_categories_order)}return e.articles}},errorCallback:function(){if(!d.errorCallback){var e=t.data(r,"tzPortfolioPlusIsotope");d.loadedText=o.infiniteScroll.noMorePageLoadText,t("#infscr-loading").hide(),c.tz_portfolio_plus_layout&&"ajaxButton"!=c.tz_portfolio_plus_layout||(e.find(e.vars.isotope_options.core.itemSelector).length>=o.infiniteScroll.countItems&&t("#tz_append a").html(d.loadedText).unbind("click"),t("#tz_append a").show()),o.infiniteScroll.displayNoMorePageLoad?(t("#tz_append").removeAttr("style").html('<a class="tzNomore">'+d.loadedText+"</a>"),t("#tz_append a").addClass("tzNomore")):t("#tz_append").hide();var a=e.vars.isotope_options.filterSelector+"[data-option-key=filter] "+e.vars.isotope_options.tagFilter,i=t(a+".selected,"+a+".active");i.length&&t.data(i[0],"infinitescroll",!0),e.find(e.vars.isotope_options.core.itemSelector).length<o.infiniteScroll.countItems?f=!0:t("#infscr-loading").remove(),t.data(r,"tppinfscr","loaded")}},loading:{msg:t('<div id="infscr-loading">'+d.msgText+"</div>"),msgText:d.msgText,finishedMsg:"",img:"",selector:"#tz_append"}},function(e,a,n){var l=e;if(e){if(e.articles&&!a.appendCallback){var u=t("<div/>");u.append(e.articles),l=u.children().get(),s.append(l)}t("#infscr-loading").css("display","none");var h=t(l).css({opacity:0});h.imagesLoaded(function(){h.animate({opacity:1});var n=s.data("tzPortfolioPlusIsotope");if(n.tz_init(),d.timeline)n.isotope("insert",h),h.each(function(){if(t(this).attr("class").match(/.*?TzDate.*?/i)){var e=t(this).attr("data-category");p==e?(t(this).remove(),n.isotope("reloadItems")):p=e}});else{if(n.isotope("appended",h),e.filter&&!a.appendCallback){var l=(l=t(e.filter)).map(function(){if(-1==t(d.sortParentTag).find(d.sortChildTag+'[data-option-value="'+t(this).data("option-value")+'"]').index())return this});t(d.sortParentTag).append(l),n.loadPortfolio()}n.afterLoadPortfolio(),n.triggerOnClickItem()}if(0,f=!0,h.length&&t("div#tz_append").find("a:first").show(),o.infiniteScroll.ajaxCompletes.length&&t.each(o.infiniteScroll.ajaxCompletes,function(t,e){"function"==typeof e&&e(h,n)}),"ajaxInfiScroll"==c.tz_portfolio_plus_layout||"ajaxButton"==c.tz_portfolio_plus_layout){var u=i.readCookie("tppLatestItem");null!=u&&(t("#"+u).length||s.infinitescroll("retrieve"))}t.data(r,"tppinfscr","loaded")})}}),"ajaxInfiScroll"==c.tz_portfolio_plus_layout&&(t(e).scroll(function(){if(t(e).unbind(".infscr"),t(e).scrollTop()+t(e).height()>=s.offset().top+s.height()){var a=t.data(r,"tzPortfolioPlusIsotope"),i=a.vars.isotope_options.filterSelector+"[data-option-key=filter] "+a.vars.isotope_options.tagFilter,n=t(i+".selected,"+i+".active"),l=n.length?t.data(n[0],"infinitescroll"):void 0,d=a.find(a.vars.isotope_options.itemSelector);if("loading"===t.data(r,"tppinfscr")||d.length>=o.infiniteScroll.countItems||d.length<o.infiniteScroll.countItems&&void 0!==l&&!0===l)return;t("#tz_append").show(),t("#infscr-loading").show(),s.infinitescroll("update",{state:{isDone:!1,isDuringAjax:!1,isBeyondMaxPage:!1}}),f&&(f=!1,s.infinitescroll("retrieve"))}}),t(e).bind("load resize",function(){t(document).height()<=t(e).height()&&s.infinitescroll("retrieve")})),c.tz_portfolio_plus_layout&&"ajaxButton"!=c.tz_portfolio_plus_layout||(t(e).unbind(".infscr"),t("div#tz_append a").click(function(){t(this).stop(),t("div#tz_append").find("a:first").hide(),s.infinitescroll("retrieve")}),t("div#tz_append > a:first").length&&t.data(r,"tppinfscr_additemmore",t("div#tz_append > a:first").clone(!0))),t.data(r,"tzPortfolioPlusInfiniteScroll",s),this},t.tzPortfolioPlusInfiniteScroll.defaults={rootPath:"",msgText:'<i class="tz-icon-spinner tz-spin"></i><em>Loading the next set of posts...</em>',loadedText:"No more items to load",navSelector:"#loadaj a",nextSelector:"#loadaj a:first",itemSelector:".element",dataType:"json",ajaxMethod:"POST",ajaxData:void 0,Itemid:null,commentText:"Comment count:",timeline:!1,sortParentTag:"#filter",sortChildTag:"a",lang:"",errorCallback:null,ajaxComplete:function(){}},t.fn.tzPortfolioPlusInfiniteScroll=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){void 0===t(this).data("tzPortfolioPlusInfiniteScroll")?new t.tzPortfolioPlusInfiniteScroll(this,e):t(this).data("tzPortfolioPlusInfiniteScroll")})}}(jQuery,window,window.TZ_Portfolio_Plus);