!function(t,e,o){"use strict";function a(t,e,o){return o&&"auto"!=o||!t.last().attr("data-order")||!t.last().data("order").toString().length||(o="filter_asc"),t.sort(function(t,e){var a=jQuery(t).data("order")?parseInt(jQuery(t).data("order"),10):jQuery(t).text().trim(),i=jQuery(e).data("order")?parseInt(jQuery(e).data("order"),10):jQuery(e).text().trim();if("*"!=jQuery(t).attr("data-option-value")&&"*"!=jQuery(e).attr("data-option-value")){if("asc"==o.substr(o.length-3,o.length).toLowerCase())return a<i?-1:a>i?1:0;if("desc"==o.substr(o.length-4,o.length).toLowerCase())return a>i?-1:a<i?1:0}}),t.each(function(t,o){e.append(o).append("\n")}),!0}o.infiniteScroll={addAjaxComplete:function(t){this.ajaxCompletes.push(t)},ajaxCompletes:[]};var i={lastClickAvailabled:!1,createCookie:function(t,e,o){if(o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var i="; expires="+a.toGMTString()}else i="";document.cookie=t+"="+e+i+"; path=/"},readCookie:function(t){for(var e=t+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){for(var i=o[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},eraseCookie:function(t){createCookie(t,"",-1)},goToByScroll:function(e){t("html,body").animate({scrollTop:t("#"+e).offset().top},"slow")}};t.tzPortfolioPlusIsotope=function(r,n){var l=t(r),s=t.extend(!0,{},t.tzPortfolioPlusIsotope.defaults),d=t.extend(!0,s,n);d.params.orderby_sec.length||(d.params.orderby_sec="rdate");var c=d.params,f=d.isotope_options;switch(c.orderby_sec){default:f.core.sortBy="original-order",f.core.sortAscending=!0;break;case"order":case"rorder":f.core.sortBy="original-order",f.core.sortAscending=!0;break;case"date":f.core.sortBy="date",f.core.sortAscending=!0,d.timeline&&(f.core.sortAscending=!1);break;case"rdate":f.core.sortBy="date",f.core.sortAscending=!1;break;case"alpha":f.core.sortBy="name",f.core.sortAscending=!0;break;case"ralpha":f.core.sortBy="name",f.core.sortAscending=!1;break;case"author":case"rauthor":f.core.sortBy="date",f.core.sortAscending=!1;break;case"hits":f.core.sortBy="hits",f.core.sortAscending=!1;break;case"rhits":f.core.sortBy="hits",f.core.sortAscending=!0}return f.core.layoutMode.length||(c.layout_type.length?f.core.layoutMode=c.layout_type[0]:f.core.layoutMode="masonry"),l.tz_init=function(e){var o,i,r=t(d.mainElementSelector).width(),n=c.tz_column_width,s=0,p=0,u=0;r<l.width()&&(r=l.width()),d.columnWidth&&(n=d.columnWidth),d.timeline&&t.extend(!0,t.Isotope.prototype,{_sort:function(){var e=this.options.sortBy,o=this._getSorter,a=this.options.sortAscending?1:-1;this.$filteredAtoms.sort(function(i,r){var n=o(i,e),l=o(r,e);if(n===l&&"original-order"!==e&&(n=o(i,"original-order"),l=o(r,"original-order")),"name"==e||"hits"==e){if(t(i).attr("data-category")>t(r).attr("data-category"))return 0;if(t(i).attr("data-category")==t(r).attr("data-category"))return t(i).hasClass("TzDate")?0:n>l?1*a:0}return(n>l?1:n<l?-1:0)*a})}}),o=Math.floor(r/n),d.beforeCalculateColumn(o),p=r,u=r,(s=(i=o+1)-r/n>r/n-o?o:i)>1&&(u=2*(p=Math.floor(r/s))),d.afterCalculateColumn(s,p),l.find(".element").width(p),l.find(d.elementFeatureSelector).width(u),l.find(".element").find(".element.TzDate").width(r),d.afterColumnWidth(s,p),e&&l.find(".element").css({opacity:0}),l.imagesLoaded(function(){d.afterImagesLoaded(),e&&l.find(".element").css({opacity:1}),l.isotope({resizable:!1,itemSelector:f.core.itemSelector,layoutMode:f.core.layoutMode,sortBy:f.core.sortBy,sortAscending:f.core.sortAscending,filter:f.core.filter,masonry:{columnWidth:p},getSortData:f.core.getSortData},function(){parseInt(c.tz_show_filter,10)&&c.filter_tags_categories_order&&(parseInt(c.show_all_filter,10)||a(t(f.sortParentTag).find(f.sortChildTag),t(f.sortParentTag),c.filter_tags_categories_order)),f.complete(),l.afterLoadPortfolio()})})},l.loadPortfolio=function(){var a=t(f.filterSelector).find(f.tagFilter),i=null,n=f.core;a.click(function(a){a.preventDefault();var s=t(this);if(s.hasClass("selected")&&!s.closest("[data-option-key=filter]").find('[data-sub-category-of="'+s.data("term")+'"]').length)return!1;var d=s.parents(".option-set"),p=n,u=d.attr("data-option-key"),g=s.attr("data-option-value");if("filter"!==u||"loading"!==t.data(r,"tppinfscr")){if(d.find(".selected").removeClass("selected"),s.addClass("selected"),"filter"===u){var h=s.data("term")||"*"!==g&&g.substr(g.lastIndexOf("_")+1,g.length),m=t(f.filterSelector).find('[data-sub-category-of="'+h+'"]');if(h&&m.length&&(s.closest(f.filterSelector).addClass("subcategory-active"),t(f.filterSelector).find("[data-sub-category-of]").removeClass("is-active"),m.addClass("is-active")),s.hasClass("js-subcategory-back-href")){var _=s.closest("[data-sub-category-of]").data("sub-category-of"),y=s.closest(f.filterSelector).find("[data-term="+_+"]").not(s);y.trigger("click"),y.closest("[data-sub-category-of]").length?y.closest("[data-sub-category-of]").addClass("is-active"):s.closest(f.filterSelector).removeClass("subcategory-active"),s.closest("[data-sub-category-of]").removeClass("is-active")}var v=!l.find(f.core.itemSelector+t(f.filterSelector+"[data-option-key=filter] "+f.tagFilter+".selected").data("option-value")).length||t(e).height()>=t(document).height();if(void 0===t.data(t(f.filterSelector+"[data-option-key=filter] "+f.tagFilter+".selected")[0],"infinitescroll")){if("ajaxInfiScroll"==c.tz_portfolio_plus_layout&&o.infiniteScroll.displayNoMorePageLoad&&l.find(f.core.itemSelector).length<o.infiniteScroll.countItems&&t("#tz_append > a:first").remove(),c.tz_portfolio_plus_layout&&"ajaxButton"!==c.tz_portfolio_plus_layout||(v=!l.find(f.core.itemSelector+t(f.filterSelector+"[data-option-key=filter] "+f.tagFilter+".selected").data("option-value")).length,o.infiniteScroll.displayNoMorePageLoad&&t("#tz_append").show()),"ajaxButton"==c.tz_portfolio_plus_layout){t("#tz_append").show();var z=t.data(r,"tppinfscr_additemmore");void 0!==z&&z.length&&(z.clone(!0).insertAfter(t("#tz_append > a:first")),t("#tz_append > a:first").remove())}var S=t.data(r,"tzPortfolioPlusInfiniteScroll");S&&l.find(f.core.itemSelector).length<o.infiniteScroll.countItems&&S.infinitescroll("update",{state:{isDone:!1,isDuringAjax:!1,isBeyondMaxPage:!1}}),v&&l.find(f.core.itemSelector).length<o.infiniteScroll.countItems&&S&&("ajaxButton"==c.tz_portfolio_plus_layout&&(t("#infscr-loading").hide(),t("#tz_append").show().find("a:first").trigger("click")),"ajaxInfiScroll"==c.tz_portfolio_plus_layout&&(t("#infscr-loading").show(),t("#tz_append").show(),t("#tz_append > a:first").remove(),s.hasClass("js-subcategory-back-href")||S.infinitescroll("retrieve")))}else o.infiniteScroll.displayNoMorePageLoad?t("#tz_append").html('<a class="tzNomore">'+o.infiniteScroll.noMorePageLoadText+"</a>").show():t("#tz_append").hide()}return g="false"!==g&&g,p[u]=g,"layoutMode"===u&&"function"==typeof e.changeLayoutMode?e.changeLayoutMode(s,p):("name"==g&&("alpha"==c.orderby_sec||"alpha"!=c.orderby_sec&&"ralpha"!=c.orderby_sec?p.sortAscending=!0:"ralpha"==c.orderby_sec&&(p.sortAscending=!1)),"date"==g&&("rdate"==c.orderby_sec||"date"!=c.orderby_sec&&"rdate"!=c.orderby_sec?p.sortAscending=!1:"date"==c.orderby_sec&&(p.sortAscending=!0)),"hits"==g&&("hits"==c.orderby_sec||"hits"!=c.orderby_sec&&"rhits"!=c.orderby_sec?p.sortAscending=!1:"rhits"==c.orderby_sec&&(p.sortAscending=!0)),p=t.extend(i,p),l.isotope(p),i=p),!1}})},l.triggerOnClickItem=function(){t(f.core.itemSelector).find("a").click(function(e){i.createCookie("tppLatestItem",t(this).closest(f.core.itemSelector).attr("id"),.5)})},l.afterLoadPortfolio=function(){if("undefined"!==d.params.remember_recent_article&&1==d.params.remember_recent_article){var e=i.readCookie("tppLatestItem");null!=e&&!i.lastClickAvailabled&&t("#"+e).length&&(i.goToByScroll(e),i.lastClickAvailabled=!0)}},l.tz_init(!0),t(f.filterSelector+"[data-option-key=sortBy]").children().removeClass("selected").end().find("[data-option-value="+f.core.sortBy+"]").addClass("selected"),l.loadPortfolio(),l.triggerOnClickItem(),l.vars=d,t.data(r,"tzPortfolioPlusIsotope",l),t(e).smartresize(function(){l.tz_init()}),this},t.tzPortfolioPlusIsotope.defaults={columnWidth:"",mainElementSelector:"#TzContent",containerElementSelector:"#portfolio",elementFeatureSelector:".tz_feature_item",JSON:{},timeline:!1,params:{orderby_sec:"rdate",tz_show_filter:1,filter_tags_categories_order:"auto",tz_portfolio_plus_layout:"ajaxButton",comment_function_type:"default",tz_filter_type:"categories",show_all_filter:0,tz_comment_type:"disqus",tz_show_count_comment:1,tz_column_width:233,layout_type:["masonry"]},isotope_options:{core:{itemSelector:".element",layoutMode:"",sortBy:"date",sortAscending:!1,filter:"*",getSortData:{date:function(t){var e=t.hasClass("element")&&t.attr("data-date").length?t.attr("data-date"):t.find(".create").text();return parseInt(e,10)},hits:function(t){var e=t.hasClass("element")&&t.attr("data-hits").length?t.attr("data-hits"):t.find(".hits,.tpp-item-hit").text();return parseInt(e,10)},name:function(t){var e=t.hasClass("element")&&t.find(".TzPortfolioTitle.name,.tpp-item-title.name").length?t.find(".TzPortfolioTitle.name, .tpp-item-title.name").text().trim():t.attr("data-title").length?t.attr("data-title"):"";return e.length?e:t.text().trim()}}},filterSelector:"#tz_options .option-set",tagFilter:"a",sortParentTag:"#filter",sortChildTag:"a",complete:function(){}},beforeCalculateColumn:function(){},afterCalculateColumn:function(){},afterColumnWidth:function(){},afterImagesLoaded:function(){}},t.fn.tzPortfolioPlusIsotope=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){void 0===t(this).data("tzPortfolioPlusIsotope")?new t.tzPortfolioPlusIsotope(this,e):t(this).data("tzPortfolioPlusIsotope")})},t.tzPortfolioPlusInfiniteScroll=function(r,n){var l,s=t(r),d=t.extend(!0,t.tzPortfolioPlusInfiniteScroll.defaults,n),c=d.params,f=!0,p=t("div.TzDate:last").attr("data-category");return l=function(){var o={},a=s.find(d.itemSelector).map(function(){var e=t(this).attr("data-portfolio-item-id");return void 0!==e&&!1!==e?t(this).data("portfolio-item-id"):t(this).attr("id").replace(/tzelement/i,"")}).get();o["shownIds[]"]=a;var i=s.data("tzPortfolioPlusIsotope");if(i){var n=i.vars,l=t(n.isotope_options.filterSelector+"[data-option-key=filter]").find(n.isotope_options.tagFilter+'.selected:not([data-option-value="*"])'),f=l.data("option-value");"tags"===c.tz_filter_type?void 0!==f&&(o.tagAlias=f.replace(/\./,"")):l.data("term")?o.id=l.data("term"):void 0!==f&&(o.id=f.substr(f.lastIndexOf("_")+1,f.length))}return e.location.search.replace(/\?/i,"").split("&").map(function(t,e,a){var i=t.split("=");if(i.length){i[0];i[0].match(/^fields/i)&&(o[i[0]]=i[1])}}),t("#tz_append > a.tzNomore").remove(),t.data(r,"tppinfscr","loading"),o},s.infinitescroll({navSelector:d.navSelector,nextSelector:d.nextSelector,itemSelector:d.itemSelector,dataType:d.dataType,ajaxMethod:d.ajaxMethod,ajaxData:l,path:function(e){return t(d.nextSelector).attr("href").replace(/\&page=[0-9+]/i,"")},template:function(e){if(e){if(e.filter){var o=(o=t(e.filter)).map(function(){if(-1==t(d.sortParentTag).find(d.sortChildTag+'[data-option-value="'+t(this).data("option-value")+'"]').index())return this});t(d.sortParentTag).append(o),s.data("tzPortfolioPlusIsotope").loadPortfolio(),a(t(d.sortParentTag).find(d.sortChildTag),t(d.sortParentTag),c.filter_tags_categories_order)}return e.articles}},errorCallback:function(){if(!d.errorCallback){var e=t.data(r,"tzPortfolioPlusIsotope");d.loadedText=o.infiniteScroll.noMorePageLoadText,t("#infscr-loading").hide(),c.tz_portfolio_plus_layout&&"ajaxButton"!=c.tz_portfolio_plus_layout||(e.find(e.vars.isotope_options.core.itemSelector).length>=o.infiniteScroll.countItems&&t("#tz_append a").html(d.loadedText).unbind("click"),t("#tz_append a").show()),o.infiniteScroll.displayNoMorePageLoad?(t("#tz_append").removeAttr("style").html('<a class="tzNomore">'+d.loadedText+"</a>"),t("#tz_append a").addClass("tzNomore")):t("#tz_append").hide(),t.data(t(e.vars.isotope_options.filterSelector+"[data-option-key=filter] "+e.vars.isotope_options.tagFilter+".selected")[0],"infinitescroll",!0),e.find(e.vars.isotope_options.core.itemSelector).length<o.infiniteScroll.countItems?f=!0:t("#infscr-loading").remove(),t.data(r,"tppinfscr","loaded")}},loading:{msg:t('<div id="infscr-loading">'+d.msgText+"</div>"),msgText:d.msgText,finishedMsg:"",img:"",selector:"#tz_append"}},function(e,a,n){var l=e;if(e){if(e.articles&&!a.appendCallback){var u=t("<div/>");u.append(e.articles),l=u.children().get(),s.append(l)}t("#infscr-loading").css("display","none");var g=t(l).css({opacity:0});g.imagesLoaded(function(){g.animate({opacity:1});var n=s.data("tzPortfolioPlusIsotope");if(n.tz_init(),d.timeline)n.isotope("insert",g),g.each(function(){if(t(this).attr("class").match(/.*?TzDate.*?/i)){var e=t(this).attr("data-category");p==e?(t(this).remove(),n.isotope("reloadItems")):p=e}});else{if(n.isotope("appended",g),e.filter&&!a.appendCallback){var l=(l=t(e.filter)).map(function(){if(-1==t(d.sortParentTag).find(d.sortChildTag+'[data-option-value="'+t(this).data("option-value")+'"]').index())return this});t(d.sortParentTag).append(l),n.loadPortfolio()}n.afterLoadPortfolio(),n.triggerOnClickItem()}if(0,f=!0,g.length&&t("div#tz_append").find("a:first").show(),o.infiniteScroll.ajaxCompletes.length&&t.each(o.infiniteScroll.ajaxCompletes,function(t,e){"function"==typeof e&&e(g,n)}),"ajaxInfiScroll"==c.tz_portfolio_plus_layout||"ajaxButton"==c.tz_portfolio_plus_layout){var u=i.readCookie("tppLatestItem");null!=u&&(t("#"+u).length||s.infinitescroll("retrieve"))}t.data(r,"tppinfscr","loaded")})}}),"ajaxInfiScroll"==c.tz_portfolio_plus_layout&&(t(e).scroll(function(){if(t(e).unbind(".infscr"),t(e).scrollTop()+t(e).height()>=s.offset().top+s.height()){var a=t.data(r,"tzPortfolioPlusIsotope"),i=t.data(t(a.vars.isotope_options.filterSelector+"[data-option-key=filter] "+a.vars.isotope_options.tagFilter+".selected")[0],"infinitescroll"),n=a.find(a.vars.isotope_options.itemSelector);if("loading"===t.data(r,"tppinfscr")||n.length>=o.infiniteScroll.countItems||n.length<o.infiniteScroll.countItems&&void 0!==i&&!0===i)return;t("#tz_append").show(),t("#infscr-loading").show(),s.infinitescroll("update",{state:{isDone:!1,isDuringAjax:!1,isBeyondMaxPage:!1}}),f&&(f=!1,s.infinitescroll("retrieve"))}}),t(e).bind("load resize",function(){t(document).height()<=t(e).height()&&s.infinitescroll("retrieve")})),c.tz_portfolio_plus_layout&&"ajaxButton"!=c.tz_portfolio_plus_layout||(t(e).unbind(".infscr"),t("div#tz_append a").click(function(){t(this).stop(),t("div#tz_append").find("a:first").hide(),s.infinitescroll("retrieve")}),t("div#tz_append > a:first").length&&t.data(r,"tppinfscr_additemmore",t("div#tz_append > a:first").clone(!0))),t.data(r,"tzPortfolioPlusInfiniteScroll",s),this},t.tzPortfolioPlusInfiniteScroll.defaults={rootPath:"",msgText:'<i class="tz-icon-spinner tz-spin"></i><em>Loading the next set of posts...</em>',loadedText:"No more items to load",navSelector:"#loadaj a",nextSelector:"#loadaj a:first",itemSelector:".element",dataType:"json",ajaxMethod:"POST",ajaxData:void 0,Itemid:null,commentText:"Comment count:",timeline:!1,sortParentTag:"#filter",sortChildTag:"a",lang:"",errorCallback:null,ajaxComplete:function(){}},t.fn.tzPortfolioPlusInfiniteScroll=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){void 0===t(this).data("tzPortfolioPlusInfiniteScroll")?new t.tzPortfolioPlusInfiniteScroll(this,e):t(this).data("tzPortfolioPlusInfiniteScroll")})}}(jQuery,window,window.TZ_Portfolio_Plus);